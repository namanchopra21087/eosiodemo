{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\naman.chopra\\\\Git-Repo\\\\eosiodemo\\\\OrderEntryReactDemo\\\\src\\\\components\\\\orderentry.jsx\";\n\n/*\n  Order Entry React Demo for EOSIO Training & Certification: AD101\n  \n  Several blocks have been commented out, as they will only\n  function as intended when the UAL (Universal Authenticator Library)\n  wrapper is implemented in App.js – at which point props will\n  contain the ual object. Uncomment (or replace) these lines as\n  appropriate.\n*/\nimport * as React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './orderentry.css';\nimport { JsonRpc } from 'eosjs';\nimport * as ReactTable from \"react-table\";\nconst defaultState = {\n  activeUser: null,\n  //to store user object from UAL\n  accountName: '',\n  //to store account name of logged in wallet user\n  orderItems: '0'\n};\n\nclass OrderEntryApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.activeUser = null;\n\n    this.renderLogoutBtn = () => {\n      const {\n        ual: {\n          activeUser,\n          activeAuthenticator,\n          logout\n        }\n      } = this.props;\n\n      if (!!activeUser && !!activeAuthenticator) {\n        this.activeUser = null;\n        return /*#__PURE__*/React.createElement(\"p\", {\n          className: \"ual-btn-wrapper\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          variant: \"outline-danger\",\n          onClick: logout,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 11\n          }\n        }, 'Logout'));\n      }\n    };\n\n    this.handleOrderUpdate = event => {\n      this.setState({\n        orderItems: event.target.value\n      });\n    };\n\n    this.renderOrderForm = () => {\n      const {\n        orderItems\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginLeft: 'auto',\n          marginRight: 'auto',\n          width: '25%',\n          marginTop: '40px',\n          marginBottom: '10px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"orderItems\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }\n      }, \"Items to order (comma separated):\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"orderItems\",\n        value: orderItems,\n        onChange: this.handleOrderUpdate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.loadReactTable = () => {\n      const data = [{\n        name: 'Ayaan',\n        age: 26\n      }, {\n        name: 'Ahana',\n        age: 22\n      }, {\n        name: 'Peter',\n        age: 40\n      }, {\n        name: 'Virat',\n        age: 30\n      }, {\n        name: 'Rohit',\n        age: 32\n      }, {\n        name: 'Dhoni',\n        age: 37\n      }];\n      const columns = [{\n        Header: 'Name',\n        accessor: 'name'\n      }, {\n        Header: 'Age',\n        accessor: 'age'\n      }];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ReactTable, {\n        data: data,\n        columns: columns //defaultPageSize = {2}  \n        //pageSizeOptions = {[2,4, 6]}  \n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 12\n        }\n      }));\n    };\n\n    const ourNetwork = {\n      chainId: 'cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f',\n      rpcEndpoints: [{\n        protocol: 'http',\n        host: 'localhost',\n        port: 8888\n      }]\n    };\n    this.state = { ...defaultState,\n      rpc: new JsonRpc('http://localhost:8888')\n    };\n    this.updateAccountName = this.updateAccountName.bind(this);\n    this.renderOrderButton = this.renderOrderButton.bind(this);\n    this.placeorder = this.placeorder.bind(this);\n    this.renderModalButton = this.renderModalButton.bind(this);\n    this.handleOrderUpdate = this.handleOrderUpdate.bind(this);\n    this.renderOrderForm = this.renderOrderForm.bind(this);\n    this.loadReactTable = this.loadReactTable.bind(this);\n  } // implement code to transact, using the order details, here\n\n\n  async placeorder() {\n    const {\n      accountName,\n      activeUser,\n      orderItems\n    } = this.state;\n    console.log(\"With UAL implemented, this submits an order for items \" + orderItems);\n    const orderTransaction = {\n      actions: [{\n        account: 'eosiotraing',\n        name: 'addorder',\n        authorization: [{\n          actor: accountName,\n          permission: 'active'\n        }],\n        data: {\n          userid: this.userid + 1,\n          items: orderItems.split(\",\"),\n          status: 'Active'\n        }\n      }]\n    };\n\n    try {\n      await activeUser.signTransaction(orderTransaction, {\n        broadcast: true\n      });\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n\n  renderOrderButton() {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: \"ual-btn-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-warning\",\n      onClick: this.placeorder,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, 'Place Order'));\n  } // once the UAL wrapper is implemented, the code below will function\n\n\n  componentDidUpdate() {\n    const {\n      ual: {\n        activeUser\n      }\n    } = this.props;\n\n    if (activeUser && !this.state.activeUser) {\n      this.setState({\n        activeUser\n      }, this.updateAccountName);\n    } else if (!activeUser && this.state.activeUser) {\n      this.setState(defaultState);\n    }\n  }\n\n  async updateAccountName() {\n    try {\n      const accountName = await this.state.activeUser.getAccountName();\n      this.setState({\n        accountName\n      }, this.updateAccountBalance);\n    } catch (e) {\n      console.warn(e);\n    }\n  }\n\n  renderModalButton() {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: \"ual-btn-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-primary\",\n      onClick: this.props.ual.showModal,\n      className: \"ual-generic-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, \"Connect to Wallet\"));\n  }\n\n  render() {\n    let modalButton = this.renderModalButton();\n    let loggedIn = '';\n    let logoutBtn = null;\n    const orderBtn = this.renderOrderButton();\n    let loadReactTbl = this.loadReactTable; // Once UAL wrapper is implemented, uncomment below lines\n\n    const u = this.props.ual.activeUser;\n\n    if (u != undefined || u != null) {\n      this.activeUser = u.accountName;\n      loggedIn = u.accountName ? `Logged in as ${u.accountName}` : '';\n    }\n\n    const {\n      accountName\n    } = this.state.rpc.get_account('eosiotraing');\n    this.state.rpc.get_table_rows({\n      json: true,\n      code: 'eosiotraing',\n      scope: 'eosiotraing',\n      table: 'orders',\n      limit: 1,\n      reverse: true,\n      show_payer: false\n    }).then(resp => {\n      this.userid = resp.rows[0].userid;\n    });\n    modalButton = !this.activeUser && this.renderModalButton();\n    logoutBtn = this.renderLogoutBtn();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://bolttech-image.s3-ap-southeast-1.amazonaws.com/images/ph/phase2_welcome_banner.jpg\",\n      height: \"200\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        color: '#2EB5C7'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }, \"Bolttech Wallet App\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }\n    }), modalButton, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: '#ffc107'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }\n    }, loggedIn), this.renderOrderForm(), orderBtn, logoutBtn, loadReactTbl);\n  }\n\n}\n\nOrderEntryApp.displayName = 'OrderEntryApp';\nexport default OrderEntryApp;","map":{"version":3,"sources":["C:/Users/naman.chopra/Git-Repo/eosiodemo/OrderEntryReactDemo/src/components/orderentry.jsx"],"names":["React","Button","Form","JsonRpc","ReactTable","defaultState","activeUser","accountName","orderItems","OrderEntryApp","Component","constructor","props","renderLogoutBtn","ual","activeAuthenticator","logout","handleOrderUpdate","event","setState","target","value","renderOrderForm","state","marginLeft","marginRight","width","marginTop","marginBottom","loadReactTable","data","name","age","columns","Header","accessor","ourNetwork","chainId","rpcEndpoints","protocol","host","port","rpc","updateAccountName","bind","renderOrderButton","placeorder","renderModalButton","console","log","orderTransaction","actions","account","authorization","actor","permission","userid","items","split","status","signTransaction","broadcast","error","warn","componentDidUpdate","getAccountName","updateAccountBalance","e","showModal","render","modalButton","loggedIn","logoutBtn","orderBtn","loadReactTbl","u","undefined","get_account","get_table_rows","json","code","scope","table","limit","reverse","show_payer","then","resp","rows","textAlign","color","displayName"],"mappings":"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","sourcesContent":["/*\n  Order Entry React Demo for EOSIO Training & Certification: AD101\n  \n  Several blocks have been commented out, as they will only\n  function as intended when the UAL (Universal Authenticator Library)\n  wrapper is implemented in App.js – at which point props will\n  contain the ual object. Uncomment (or replace) these lines as\n  appropriate.\n*/\n\nimport * as React from 'react'\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './orderentry.css';\nimport { JsonRpc } from 'eosjs';\nimport * as ReactTable from \"react-table\";\n\nconst defaultState = {\n  activeUser: null, //to store user object from UAL\n  accountName: '', //to store account name of logged in wallet user\n  orderItems: '0'\n}\n\nclass OrderEntryApp extends React.Component {\n  static displayName = 'OrderEntryApp';\n  userid;\n  activeUser=null;\n\n  constructor(props) {\n    super(props)\n    const ourNetwork={\n      chainId:'cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f',\n      rpcEndpoints:[{protocol:'http',host:'localhost',port:8888}]\n    };\n    this.state = {\n      ...defaultState,\n      rpc:new JsonRpc('http://localhost:8888')\n    }\n    this.updateAccountName = this.updateAccountName.bind(this)\n    this.renderOrderButton = this.renderOrderButton.bind(this)\n    this.placeorder = this.placeorder.bind(this)\n    this.renderModalButton = this.renderModalButton.bind(this)\n    this.handleOrderUpdate = this.handleOrderUpdate.bind(this)\n    this.renderOrderForm = this.renderOrderForm.bind(this)\n    this.loadReactTable = this.loadReactTable.bind(this)\n  }\n\n  // implement code to transact, using the order details, here\n  async placeorder() {\n    const { accountName, activeUser, orderItems } = this.state\n    console.log(\"With UAL implemented, this submits an order for items \" + orderItems);\n    const orderTransaction={\n      actions:[{\n        account:'eosiotraing',\n        name:'addorder',\n        authorization:[{actor:accountName,permission:'active'}],\n        data:{\n          userid:this.userid+1,\n          items:orderItems.split(\",\"),\n          status:'Active'\n        }\n      }]\n    }\n    try{\n      await activeUser.signTransaction(orderTransaction,{broadcast:true});\n    }catch(error){\n      console.warn(error);\n    }\n  }\n\n\n  renderOrderButton() {\n    return (\n      <p className='ual-btn-wrapper'>\n        <Button variant=\"outline-warning\" onClick={this.placeorder}>\n          {'Place Order'}\n        </Button>\n      </p>\n    )\n  }\n\n\n  // once the UAL wrapper is implemented, the code below will function\n  \n  \n  componentDidUpdate() {\n    const { ual: { activeUser } } = this.props\n    if (activeUser && !this.state.activeUser) {\n      this.setState({ activeUser }, this.updateAccountName)\n    } else if (!activeUser && this.state.activeUser) {\n      this.setState(defaultState)\n    }\n  }\n  \n  async updateAccountName()   {\n    try {\n      const accountName = await this.state.activeUser.getAccountName()\n      this.setState({ accountName }, this.updateAccountBalance)\n    } catch (e) {\n      console.warn(e)\n    }\n  }\n\n  renderLogoutBtn = () => {\n    const { ual: { activeUser, activeAuthenticator, logout } } = this.props\n    if (!!activeUser && !!activeAuthenticator) {\n      this.activeUser=null;\n      return (\n        <p className='ual-btn-wrapper'>\n          <Button variant='outline-danger' onClick={logout}>\n            {'Logout'}\n          </Button>\n        </p>\n      )\n    }\n  }\n\n  renderModalButton() {\n    return (\n      <p className='ual-btn-wrapper'>\n        <Button variant='outline-primary'\n          onClick={this.props.ual.showModal}\n          className='ual-generic-button'>Connect to Wallet</Button>\n      </p>\n    )\n  }\n\n  handleOrderUpdate = (event) => {\n    this.setState({orderItems: event.target.value});\n  }\n\n  renderOrderForm = () => {\n    const { orderItems } = this.state\n    return(\n      <div style={{marginLeft: 'auto', marginRight:'auto', width:'25%', marginTop:'40px', marginBottom:'10px'}}>\n        <Form>\n          <Form.Group controlId=\"orderItems\">\n            <Form.Label>Items to order (comma separated):</Form.Label>\n            <Form.Control\n                  type=\"text\"\n                  name=\"orderItems\"\n                  value={orderItems}\n                  onChange={this.handleOrderUpdate}\n                />\n          </Form.Group>\n        </Form>\n      </div>\n    )\n  }\n\n  loadReactTable = () => {\n    const data = [{  \n      name: 'Ayaan',  \n      age: 26  \n      },{  \n      name: 'Ahana',  \n      age: 22  \n      },{  \n      name: 'Peter',  \n      age: 40   \n      },{  \n      name: 'Virat',  \n      age: 30  \n      },{  \n      name: 'Rohit',  \n      age: 32  \n      },{  \n      name: 'Dhoni',  \n      age: 37  \n      }]  \n  \n      const columns = [{  \n        Header: 'Name',  \n        accessor: 'name'  \n       },{  \n       Header: 'Age',  \n       accessor: 'age'  \n       }]  \n       return (\n        <div>  \n           <ReactTable\n               data={data}  \n               columns={columns}  \n               //defaultPageSize = {2}  \n               //pageSizeOptions = {[2,4, 6]}  \n            />  \n        </div>        \n   )  \n  }\n\n  render() {\n    let modalButton = this.renderModalButton()\n    let loggedIn = ''\n    let logoutBtn = null\n    const orderBtn = this.renderOrderButton()\n    let  loadReactTbl = this.loadReactTable\n    // Once UAL wrapper is implemented, uncomment below lines\n    \n    const u=this.props.ual.activeUser;\n    if(u!=undefined || u!=null){\n       this.activeUser  = u.accountName;\n       loggedIn = u.accountName ? `Logged in as ${u.accountName}` : ''\n    }\n    \n    const { accountName } = this.state.rpc.get_account('eosiotraing');\n    this.state.rpc.get_table_rows({\n      json:true,\n      code:'eosiotraing',\n      scope:'eosiotraing',\n      table:'orders',\n      limit:1,\n      reverse:true,\n      show_payer:false\n    }).then(resp=>{\n      this.userid=resp.rows[0].userid;\n    });\n\n    modalButton = !this.activeUser && this.renderModalButton()\n    logoutBtn = this.renderLogoutBtn()\n\n    return (\n      <div  style={{ textAlign: 'center'}}>\n        <img src=\"https://bolttech-image.s3-ap-southeast-1.amazonaws.com/images/ph/phase2_welcome_banner.jpg\" height=\"200\"/>\n        <h2 style={{color:'#2EB5C7'}}>Bolttech Wallet App</h2>\n        <div style={{marginBottom: '20px'}}></div>\n        {modalButton}\n        <h3 style={{color:'#ffc107'}}>{loggedIn}</h3>\n        {this.renderOrderForm()}\n        {orderBtn}\n        {logoutBtn}\n        {loadReactTbl}\n      </div>\n    )\n  }\n}\n\nexport default OrderEntryApp;"]},"metadata":{},"sourceType":"module"}